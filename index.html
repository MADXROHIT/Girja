<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GIRJA REFRIGERATION | Premium Service</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Icons (for buttons only) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Firebase (OTP Login) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<!-- EmailJS (Email notification) -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#eef2f7;padding-bottom:90px}

/* HEADER */
.header{
  display:flex;align-items:center;gap:10px;
  padding:12px;background:#0a1a44;color:#fff
}
.logo{
  width:42px;height:42px;border-radius:50%;
  background:linear-gradient(135deg,#00b4ff,#004aad);
  display:flex;align-items:center;justify-content:center;
  font-weight:bold
}

/* GLASS */
.glass{
  background:rgba(255,255,255,.2);
  backdrop-filter:blur(12px);
  border-radius:18px;
  box-shadow:0 8px 30px rgba(0,0,0,.15)
}

/* PAGES */
.page{display:none;padding:15px}
.page.active{display:block}

/* HERO */
.hero{
  margin:15px;padding:28px;text-align:center;color:#fff;
  background:linear-gradient(135deg,#004aad,#00b4ff,#6a11cb);
  background-size:300% 300%;
  animation:bg 7s ease infinite
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.hero button{
  margin-top:15px;padding:12px 20px;border:none;
  border-radius:12px;background:#ff9800;color:#fff;
  font-size:15px;cursor:pointer
}

/* SERVICES (REAL IMAGE ICONS) */
.services{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:14px;margin-top:16px
}
.service-card{
  background:rgba(255,255,255,.9);
  border-radius:18px;padding:18px 10px;text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,.12);
  transition:.25s
}
.service-card:hover{transform:translateY(-4px)}
.service-card img{
  width:48px;height:48px;object-fit:contain;margin-bottom:8px
}
.service-card p{margin:0;font-weight:500}

/* FLOAT BOOKING */
.float-book{
  position:fixed;right:18px;bottom:110px;
  background:#ff9800;color:#fff;
  padding:16px;border-radius:50%;
  font-size:20px;cursor:pointer;
  animation:float 2.5s ease-in-out infinite;z-index:999
}
@keyframes float{50%{transform:translateY(-8px)}}

/* POPUPS */
.popup{
  display:none;position:fixed;top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,.6);z-index:1000
}
.popup-box{
  position:relative;background:#fff;width:90%;
  max-width:360px;margin:80px auto;
  padding:20px;border-radius:16px
}
.popup-box input,.popup-box select{
  width:100%;padding:10px;margin:6px 0
}
.popup-box button{
  width:100%;padding:10px;background:#004aad;
  color:#fff;border:none;border-radius:10px
}
.close-btn{
  position:absolute;top:10px;right:14px;
  font-size:18px;cursor:pointer
}

/* ORDERS / ACCOUNT */
.order{
  background:#fff;padding:12px;border-radius:14px;
  margin-bottom:10px
}
.today{border-left:5px solid #00b4ff}

/* BOTTOM BAR */
.bottom{
  position:fixed;bottom:0;left:0;width:100%;
  background:#fff;display:flex;justify-content:space-around;
  padding:10px;border-top:1px solid #ddd
}
.bottom a{
  text-decoration:none;color:#333;font-size:12px;text-align:center
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="logo">GR</div>
  <b>GIRJA REFRIGERATION</b>
</div>

<!-- HOME -->
<div id="home" class="page active">
  <div class="hero glass">
    <h2>Comfort You Can Trust</h2>
    <p>Fast ‚Ä¢ Reliable ‚Ä¢ Professional Home Services</p>
    <button onclick="openBooking()">Book Instant Service ‚Üí</button>
  </div>

  <!-- SERVICES (replace image links with your real logos) -->
  <div class="services">
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>AC Service</p>
    </div>
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>Fridge</p>
    </div>
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>Cooler</p>
    </div>
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>RO</p>
    </div>
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>Wiring</p>
    </div>
    <div class="service-card">
      <img src="https://via.placeholder.com/64">
      <p>Washing</p>
    </div>
  </div>
</div>

<!-- ACCOUNT -->
<div id="account" class="page"></div>

<!-- ORDERS -->
<div id="orders" class="page"></div>

<!-- FLOAT BOOK -->
<div class="float-book" onclick="openBooking()">
  <i class="fa-solid fa-calendar-check"></i>
</div>

<!-- BOOKING POPUP -->
<div class="popup" id="bookPop">
  <div class="popup-box">
    <div class="close-btn" onclick="closePopup('bookPop')">‚úñ</div>
    <h3>Book Service</h3>
    <input id="name" placeholder="Name">
    <input id="location" placeholder="Location">
    <input id="service" placeholder="Service">
    <select id="tech">
      <option>Ramesh (AC)</option>
      <option>Suresh (RO)</option>
      <option>Amit (Electric)</option>
    </select>
    <button onclick="book()">Book Now</button>
  </div>
</div>

<!-- LOGIN REQUIRED MESSAGE -->
<div class="popup" id="loginMsgPop">
  <div class="popup-box">
    <div class="close-btn" onclick="closePopup('loginMsgPop')">‚úñ</div>
    <h3>Login Required</h3>
    <p style="text-align:center">
      Please login first to book a service
    </p>
    <button onclick="openLogin()">Login Now</button>
  </div>
</div>

<!-- LOGIN POPUP -->
<div class="popup" id="loginPop">
  <div class="popup-box">
    <div class="close-btn" onclick="closePopup('loginPop')">‚úñ</div>
    <h3>Login</h3>
    <input id="phone" placeholder="+91XXXXXXXXXX">
    <div id="recaptcha"></div>
    <button onclick="sendOTP()">Send OTP</button>
    <input id="otp" placeholder="OTP">
    <button onclick="verifyOTP()">Verify</button>
  </div>
</div>

<!-- BOTTOM BAR -->
<div class="bottom">
  <a onclick="openPage('home')">üè†<br>Home</a>
  <a onclick="openBooking()">üõ†<br>Service</a>
  <a onclick="openOrders()">üì¶<br>Orders</a>
  <a onclick="openAccount()">üë§<br>Account</a>
</div>

<script>
/* ========= CONFIG ========= */

// EmailJS (REPLACE)
emailjs.init("YOUR_PUBLIC_KEY");

// Firebase (your project)
firebase.initializeApp({
  apiKey: "AIzaSyCyRePp03hTEVpVNQRhjs70T4N-MZwg6JY",
  authDomain: "girja-refrigeration.firebaseapp.com"
});
const auth = firebase.auth();
window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
  'recaptcha',{size:'invisible'}
);

/* ========= HELPERS ========= */
function isLoggedIn(){ return !!localStorage.getItem("mobile"); }
function closePopup(id){ document.getElementById(id).style.display="none"; }

/* ========= NAV ========= */
function openPage(p){
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.getElementById(p).classList.add('active');
  if(p==="account") loadAccount();
  if(p==="orders") loadOrders();
}
function openAccount(){
  if(!isLoggedIn()){
    document.getElementById("loginMsgPop").style.display="block";
    return;
  }
  openPage('account');
}
function openOrders(){
  if(!isLoggedIn()){
    document.getElementById("loginMsgPop").style.display="block";
    return;
  }
  openPage('orders');
}

/* ========= BOOKING ========= */
function openBooking(){
  if(!isLoggedIn()){
    document.getElementById("loginMsgPop").style.display="block";
    return;
  }
  document.getElementById("bookPop").style.display="block";
}

/* ========= LOGIN ========= */
function openLogin(){
  closePopup('loginMsgPop');
  document.getElementById("loginPop").style.display="block";
}
function sendOTP(){
  auth.signInWithPhoneNumber(phone.value, recaptchaVerifier)
  .then(r=>{ window.cr=r; alert("OTP Sent"); })
  .catch(e=>alert(e.message));
}
function verifyOTP(){
  cr.confirm(otp.value).then(r=>{
    localStorage.setItem("mobile", r.user.phoneNumber);
    closePopup('loginPop');
    alert("Login Successful");
    openBooking(); // auto go to booking
  }).catch(()=>alert("Wrong OTP"));
}

/* ========= BOOK ========= */
function book(){
  let o={
    name:name.value,
    mobile:localStorage.getItem("mobile"),
    location:location.value,
    service:service.value,
    tech:tech.value,
    status:"Pending",
    time:new Date().toLocaleString()
  };

  localStorage.setItem("user", JSON.stringify({
    name:o.name, location:o.location
  }));

  let arr=JSON.parse(localStorage.getItem("orders")||"[]");
  arr.unshift(o);
  localStorage.setItem("orders", JSON.stringify(arr));

  // Email notification
  emailjs.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID", o);

  // WhatsApp auto
  window.open(
    "https://wa.me/16475572631?text="+
    encodeURIComponent(`New Booking\n${o.name}\n${o.mobile}\n${o.service}`)
  );

  closePopup('bookPop');
  alert("Booking Successful");
}

/* ========= ACCOUNT ========= */
function loadAccount(){
  let m=localStorage.getItem("mobile");
  let u=JSON.parse(localStorage.getItem("user")||"{}");
  account.innerHTML=`
    <div class="order">
      <b>Name:</b> ${u.name||"Not set"}<br>
      <b>Mobile:</b> ${m}<br>
      <b>Location:</b> ${u.location||"Not set"}
    </div>
    <button onclick="logout()" style="
      width:100%;padding:10px;border:none;
      border-radius:12px;background:#e53935;
      color:#fff;font-size:15px
    ">Logout</button>
  `;
}
function logout(){
  if(confirm("Logout?")){
    localStorage.removeItem("mobile");
    openPage('home');
  }
}

/* ========= ORDERS ========= */
function loadOrders(){
  let arr=JSON.parse(localStorage.getItem("orders")||"[]");
  orders.innerHTML="";
  if(arr.length===0){
    orders.innerHTML="<div class='order'>No orders yet</div>";
    return;
  }
  let today=new Date().toLocaleDateString();
  arr.forEach((o,i)=>{
    let d=new Date(o.time).toLocaleDateString();
    orders.innerHTML+=`
      <div class="order ${d===today?'today':''}">
        <b>${o.service}</b><br>
        üë®‚Äçüîß ${o.tech}<br>
        üìÖ ${o.time}<br>
        <b>Status:</b>
        <select onchange="updateStatus(${i},this.value)">
          <option ${o.status==="Pending"?"selected":""}>Pending</option>
          <option ${o.status==="In Progress"?"selected":""}>In Progress</option>
          <option ${o.status==="Completed"?"selected":""}>Completed</option>
        </select>
      </div>
    `;
  });
}
function updateStatus(i,v){
  let arr=JSON.parse(localStorage.getItem("orders")||"[]");
  arr[i].status=v;
  localStorage.setItem("orders", JSON.stringify(arr));
}
</script>

</body>
</html>
